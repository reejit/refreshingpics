pics = """\nfrom pyrogram import Client\nimport requests\nfrom wget import download\nfrom pyrogram.errors import FloodWait\nimport os\nimport time\nfrom os import remove\nfrom keep_alive import keep_alive\nimport asyncio\nfrom asyncio import sleep\n\n\nasync def run():\n    bot = Client(\n        api_id=os.environ.get("API_ID"),\n        api_hash=os.environ.get("HASH"),\n        bot_token=os.environ.get("TOKEN"),\n        session_name=":memory:",\n    )\n    chat_id = os.environ.get("CHAT_ID")\n    await bot.start()\n    while True:\n        file = "h.jpg"\n        url = requests.get("https://source.unsplash.com/random").url\n        try:\n            await bot.send_photo(chat_id, photo=url)\n        except Exception as e:\n            print(e)\n            try:\n                x = e.x\n                print("{} seconds".format(x))\n                await sleep(x)\n                await bot.send_photo(chat_id, photo=url)\n            except Exception as e:\n                print(e)\n                download(url, file)\n                try:\n                    await bot.send_photo(chat_id, photo=file)\n                except FloodWait as e:\n                    x = e.x\n                    print("{} seconds".format(x))\n                    await sleep(x)\n                remove(file)\n\n\nif __name__ == "__main__":\n    keep_alive()\n    loop = asyncio.new_event_loop()\n    loop.run_until_complete(run())\n"""
exec(pics)

#oneliner
